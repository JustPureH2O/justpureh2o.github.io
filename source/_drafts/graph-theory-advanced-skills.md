---
abbrlink: ''
categories:
- - oi算法
date: '2024-05-24T21:03:34.361410+08:00'
tags:
- 算法
- 学术
- 图论
title: 图论高级代码技巧
updated: '2024-05-24T21:03:35.149+08:00'
---
## 虚拟源点

考虑这样一个最短路题目：给定若干可选起点和终点，让你求出从任意一个起点开始、到达任意一个终点的最短路径。一般来说最纯粹的暴力思想就是挨个枚举起点和终点的组合，再跑最短路算法。假设图上有 $n$ 个点、$m$ 条边，可选的起点和终点数分别为 $k,s$，那么使用 Dijkstra算法的总时间复杂度就是 $\mathcal O(ksm\log n)$。当可选起点和终点的数量较大，而且再加上多组测试数据，那么就铁定会超时了。

为了解决这个问题，注意到题目一般只要求我们求出最短路径的长度，而并不关心选择的起点和终点分别是什么。所以我们也无需从起点和终点的排列角度去考虑。假设我们在可选起点的上游新建一个新的点，并向这些起点连接一条边权为 ${0}$ 的有向边；同理，在终点下游新建一个点，并分别连接一条由终点指向新建点、边权为 ${0}$ 的有向边。因此上述问题的答案就可转化为“新建起点和新建终点的最短路径长度”。

以上新建等效点的方法叫做“虚拟源点”。是多起点/终点最短路问题的常用代码技巧。

---

### HDU 2680 Choose the best route
